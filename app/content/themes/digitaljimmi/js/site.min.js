/*! DigitalJimmi 2016-03-05 */

"undefined"==typeof console&&(console={log:function(){}}),function(){function run(){Modernizr.load([{test:Modernizr.mq("only all"),nope:"http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"}])}function profileForm(){function ProfileFormCtrl($scope,DataService){this.errorMsg=void 0,this.isSubmitting=!1,this.storeID=null,this.stores={},this.btnLabel="BLIV 5 STAR HOST",this.user={},this.dropdownSelect=function(id,index){this.user.store_id=id,this.storeIndex=index,angular.element(".dropdown-toggle").dropdown("toggle")}}return{restrict:"E",controller:ProfileFormCtrl,controllerAs:"profileformctrl",bindToController:!0,template:["<form>","<profile-picture></profile-picture>","</form>"].join(""),replace:!0}}function profilePicture(){function ProfilePictureCtrl($scope,DataService,$attrs){function $id(id){return document.getElementById(id)}function Init(){var fileselect=$id("fileselect"),filedrag=$id("filedrag");$id("submitbutton");fileselect.addEventListener("change",FileSelectHandler,!1);var xhr=new XMLHttpRequest;xhr.upload&&(filedrag.addEventListener("dragstart",fileDragStart,!1),filedrag.addEventListener("dragend",fileDragEnd,!1),filedrag.addEventListener("dragover",FileDragHover,!1),filedrag.addEventListener("dragleave",FileDragHover,!1),filedrag.addEventListener("drop",FileSelectHandler,!1),filedrag.style.display="block")}function fileDragStart(e){submitbutton.style.display="none"}function fileDragEnd(e){submitbutton.style.display="block"}function FileDragHover(e){e.stopPropagation(),e.preventDefault()}function FileSelectHandler(e){console.log("fs handler"),FileDragHover(e);var files=e.target.files||e.dataTransfer.files;console.log(files),readURL(files,"preview");for(var f,i=0;f=files[i];i++)ParseFile(f)}function ParseFile(file){console.log("<p>File information: <strong>"+file.name+"</strong> type: <strong>"+file.type+"</strong> size: <strong>"+file.size+"</strong> bytes</p>")}function readURL(files,id){if(files&&files[0]){var reader=new FileReader;reader.onload=function(e){vm.base64=e.target.result;var bin=atob(vm.base64.split(",")[1]),exif=EXIF.readFromBinaryFile(new BinaryFile(bin));console.log("orientation: "+exif.Orientation),vm.orientation=exif.Orientation,vm.submit(),$("#"+id).attr("src",vm.base64);var iOS=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),webkit=!!navigator.userAgent.match(/WebKit/i),iOSSafari=iOS&&webkit&&!navigator.userAgent.match(/CriOS/i);iOSSafari||$("#"+id).attr("class","rotate--"+exif.Orientation),objectFit.polyfill({selector:"#"+id,fittype:"cover",disableCrossDomain:"true"})},reader.readAsDataURL(files[0])}}function onProfileSuccess(response){console.log(response),this.message="Billedet er nu uploadet.",this.isSubmitting=!1,setTimeout(function(){window.location=window.location.pathname},3e3)}function onProfileError(error){this.message="Der opstod en fejl - pr√∏v igen.",this.isSubmitting=!1}var vm=this;vm.base64="",this.message=void 0,this.isSubmitting=!1,this.storeID=null,this.stores={},this.btnLabel="BLIV 5 STAR HOST",this.user={},$attrs.$observe("src",function(src){console.log("s: "+src),vm.profile_picture=src}),window.File&&window.FileList&&window.FileReader&&Init(),this.submit=function(){console.log("submitting"),this.isSubmitting||(this.isSubmitting=!0,""!=vm.base64&&(this.user.picture_base64=vm.base64),""!=vm.orientation&&(this.user.picture_orientation=vm.orientation),DataService.updateUser(this.user).then(angular.bind(this,onProfileSuccess),angular.bind(this,onProfileError)))}}return{restrict:"E",controller:ProfilePictureCtrl,controllerAs:"profilePictureCtrl",bindToController:!0,template:['<div class="upload-foto">','<div ng-class="{active: profilePictureCtrl.isSubmitting}" class="sk-fading-circle spinner">','<div class="sk-circle1 sk-circle"></div>','<div class="sk-circle2 sk-circle"></div>','<div class="sk-circle3 sk-circle"></div>','<div class="sk-circle4 sk-circle"></div>','<div class="sk-circle5 sk-circle"></div>','<div class="sk-circle6 sk-circle"></div>','<div class="sk-circle7 sk-circle"></div>','<div class="sk-circle8 sk-circle"></div>','<div class="sk-circle9 sk-circle"></div>','<div class="sk-circle10 sk-circle"></div>','<div class="sk-circle11 sk-circle"></div>','<div class="sk-circle12 sk-circle"></div>',"</div>",'<p class="message" ng-class="{active: profilePictureCtrl.message}" ng-bind="profilePictureCtrl.message"></p>','<div id="filedrag" class="upload-foto__image"></div>','<div ng-class="{done: profilePictureCtrl.message, submitting: profilePictureCtrl.isSubmitting}" class="fileUpload btn btn-primary">',"<span>Upload billede</span>",'<input type="file" class="upload" id="fileselect" accept="image/*">',"</div>","</div>"].join(""),replace:!0}}function DataService($q,$http){function sendRequest(data){var request=$q.defer();return $http({method:"POST",url:ajaxUrl,data:jQuery.param(data),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(response){angular.isDefined(response.config)&&angular.isDefined(response.config.data),1===response.data.status?request.resolve(response.data):request.reject(response)},function(response){request.reject(response)}),request.promise}var api={};return api.updateUser=function(formData){return console.log("formdata",formData),sendRequest({action:"gateway",task:"updateUser",picture_base64:formData.picture_base64,picture_orientation:formData.picture_orientation})},api}function GetIEVersion(){var sAgent=window.navigator.userAgent,Idx=sAgent.indexOf("MSIE");return Idx>0?parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx))):navigator.userAgent.match(/Trident\/7\./)?11:0}function whichTransitionEvent(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}function whichAnimationEvent(){var t,el=document.createElement("fakeelement"),animations={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in animations)if(void 0!==el.style[t])return animations[t]}function startImageLoop(){loopImage=window.setInterval(function(){$(".headImage").attr("src",dataArray[thisId]),thisId++,5===thisId&&(thisId=0)},3e3)}function openFinish(){modalOpen=!0}function closeFinish(){intro.addClass("active"),intro2.addClass("active"),(windowW>700||!isMobile.any)&&circleSvg.fadeIn("slow"),circleComponent.fadeIn("slow"),modalOpen=!1}function openModal(){windowW>700||!isMobile.any?(intro.removeClass("active"),intro2.removeClass("active"),self=$(this),circle__inner.hasClass("active")||(self.hasClass("circle__component--1")&&(circle__inner.addClass("active-circle-1"),startImageLoop()),self.hasClass("circle__component--2")&&circle__inner.addClass("active-circle-2"),self.hasClass("circle__component--3")&&circle__inner.addClass("active-circle-3"),circle__inner.addClass("active"),circle.addClass("active"),body.addClass("backdrop"),TweenLite.to(circle__inner,1,{css:{width:"700px",height:"auto",marginLeft:"-350px",marginTop:"auto"},onComplete:openFinish}),circleSvg.css("display","none"),circleComponent.css("display","none")),circle__inner.one(animationEvent,function(){close.addClass("active"),self.hasClass("circle__component--1")&&circle1.addClass("active"),self.hasClass("circle__component--2")&&circle2.addClass("active"),self.hasClass("circle__component--3")&&circle3.addClass("active")})):(intro.removeClass("active"),intro2.removeClass("active"),self=$(this),circle__inner.hasClass("active")||(self.hasClass("circle__component--1")&&(circle__inner.addClass("active-circle-1"),startImageLoop()),self.hasClass("circle__component--2")&&circle__inner.addClass("active-circle-2"),self.hasClass("circle__component--3")&&circle__inner.addClass("active-circle-3"),TweenLite.to(circle__inner,.3,{css:{width:"100%",height:"100%",marginLeft:"0",marginTop:"0",top:"auto",left:"auto"},onComplete:openFinish})),close.addClass("active"),self.hasClass("circle__component--1")&&circle1.addClass("active"),self.hasClass("circle__component--2")&&circle2.addClass("active"),self.hasClass("circle__component--3")&&circle3.addClass("active"))}function closeCircle(){windowW>700||!isMobile.any?(modalOpen=!1,circle__inner.hasClass("active")&&intro.hasClass("active")&&intro2.hasClass("active")&&(intro.removeClass("active"),intro2.removeClass("active")),clearInterval(loopImage),circle__inner.hasClass("active")&&(circle__inner.removeClass("active").addClass("closed"),TweenLite.to(circle__inner,1,{css:{width:"200px",height:"200px",marginLeft:"-100px",marginTop:"-100px"},onComplete:closeFinish}),(circle__inner.hasClass("active-circle-1")||circle__inner.hasClass("active-circle-2")||circle__inner.hasClass("active-circle-3"))&&circle__inner.removeClass("active-circle-1").removeClass("active-circle-2").removeClass("active-circle-3"),close.removeClass("active"),body.removeClass("backdrop"),circleContent.removeClass("active")),circle__inner.one(animationEvent,function(){circle__inner.removeClass("closed"),circle.removeClass("active")})):(modalOpen=!1,clearInterval(loopImage),intro.hasClass("active")&&intro2.hasClass("active")&&(intro.removeClass("active"),intro2.removeClass("active")),TweenLite.to(circle__inner,.3,{css:{width:"200px",height:"200px",marginLeft:"-100px",marginTop:"-100px",top:"50%",left:"50%"},onComplete:closeFinish}),close.removeClass("active"),circleContent.removeClass("active"),(circle__inner.hasClass("active-circle-1")||circle__inner.hasClass("active-circle-2")||circle__inner.hasClass("active-circle-3"))&&circle__inner.removeClass("active-circle-1").removeClass("active-circle-2").removeClass("active-circle-3"))}function getImages(pageNr){console.log("Image",pageNr),$.ajax({method:"POST",url:ajaxUrl,data:{action:"loadimages",imageNr:pageNr},dataType:"json"}).done(function(data){var exist;null!==data.data.images&&(exist=images.indexOf(data.data.images.profile_picture)),-1===exist&&null!==data.data.images?(images.push(data.data.images.profile_picture),slider.slick("slickAdd",'<div class="slide" style="background-image:url('+data.data.images.profile_picture+');"></div>',!0),setTimeout(function(){getImages(pageNr+1)},1e4)):(-1!==exist||null===data.data.images)&&(slider.slick("slickPlay"),console.log("Trying again",pageNr),setTimeout(function(){getImages(pageNr)},1e4))})}angular.element(document).ready(function(event){var modules=[];angular.module("digital",modules).factory("DataService",DataService).directive("profileForm",profileForm).directive("profilePicture",profilePicture).run(run),angular.bootstrap(angular.element("#ng-app"),["digital"])}),DataService.$inject=["$q","$http"],+function($){"use strict";function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})}var Modal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.VERSION="3.3.4",Modal.TRANSITION_DURATION=300,Modal.BACKDROP_TRANSITION_DURATION=150,Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){$(e.target).is(that.$element)&&(that.ignoreBackdropClick=!0)})}),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),that.adjustDialog(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},Modal.prototype.resize=function(){this.isShown?$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.$body.removeClass("modal-open"),that.resetAdjustments(),that.resetScrollbar(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop(),callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()},Modal.prototype.handleUpdate=function(){this.adjustDialog()},Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})},Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth,this.scrollbarWidth=this.measureScrollbar()},Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",bodyPad+this.scrollbarWidth)},Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return this.$body[0].removeChild(scrollDiv),scrollbarWidth};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.one("show.bs.modal",function(showEvent){showEvent.isDefaultPrevented()||$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})}),Plugin.call($target,option,this)})}(jQuery),GetIEVersion()>0&&(console.log("This is IE "+GetIEVersion()),$("#ieModal").modal("show"));var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},IPAD:function(){return navigator.userAgent.match(/iPad/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},windowW=$(window).width(),circleComponent=$(".circle__component"),close=$(".close"),circle=$(".circle"),circle__inner=$(".circle__inner"),circle1=$(".circle-1"),circle2=$(".circle-2"),circle3=$(".circle-3"),circleSvg=$(".circle_svg"),circleContent=$(".circlecontent"),personalContent=$(".personalContent"),personalImage=$(".headImage"),personalHeader=$(".header"),intro=$(".intro"),intro2=$(".intro2"),body=$("body"),dataArray=[];dataArray[0]=themeUrl+"/assets/img/1.jpg",dataArray[1]=themeUrl+"/assets/img/2.jpg",dataArray[2]=themeUrl+"/assets/img/3.jpg",dataArray[3]=themeUrl+"/assets/img/4.jpg",dataArray[4]=themeUrl+"/assets/img/5.jpg",dataArray[5]=themeUrl+"/assets/img/6.jpg";var thisId=0,loopImage=null,animationEvent=(whichTransitionEvent(),whichAnimationEvent());circle.one(animationEvent,function(event){intro.addClass("active"),intro2.addClass("active")});var modalOpen=!1;circleComponent.on("click",openModal),close.on("click",closeCircle);var className="active";personalContent.scroll(function(){personalContent.scrollTop()>=50?(personalImage.addClass(className),personalHeader.addClass(className)):(personalImage.removeClass(className),personalHeader.removeClass(className))}),$(".modal-cover").click(function(e){modalOpen&&closeCircle()});var getUrlParameter=function(sParam){var sParameterName,i,sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split("&");for(i=0;i<sURLVariables.length;i++)if(sParameterName=sURLVariables[i].split("="),sParameterName[0]===sParam)return void 0===sParameterName[1]?!0:sParameterName[1]},slider=$(".slider-container");slider.slick({infinite:!0,speed:500,autoplaySpeed:5e3,fade:!0,cssEase:"linear",slidesToShow:1,autoplay:!1,pauseOnHover:!1});var images=[],pageNr=0;slider.length&&getImages(pageNr);var konf=getUrlParameter("response");"fu-sent"===konf&&($(".fileUpload").css("display","none"),$(".ugc-notice").text("Billedet er uploadet"),$(".ugc-notice").append('<img src="https://media.giphy.com/media/TAoXY6URAcUbS/giphy.gif">'),setTimeout(function(){window.location=window.location.pathname},2e3))}();
//# sourceMappingURL=site.min.map